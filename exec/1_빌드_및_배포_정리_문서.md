# **ëª©ì°¨**

- [ë²„ì „ ì •ë³´](#âœ…-ë²„ì „-ì •ë³´)
- [ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­](#ğŸ› ï¸-ì‚¬ì „-ì¤€ë¹„-ì‚¬í•­)
- [í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬](#ğŸ› ï¸-í”„ë¡ íŠ¸ì—”ë“œ-ë°°í¬)

  <br>

# âœ… ë²„ì „ ì •ë³´

- ## Unity

  - `Unity 6 (6000.0.46f1)`
  - `MCP` - ëª¨ë¸ : **claude**
  - `Python 3.11.9`
  - `Unity Hub & Editor - version 2020.3`
  - `uv` (Python package manager)

- ## AI

  - `python 3.11.9`
  - `VS Code 1.100.2`
  - `ollama v0.7.0` - ëª¨ë¸ : **GEMMA3**
  - `fastapi 0.115.12`
  - `gensim` - ëª¨ë¸ : **word2vec-google-news-300**

- ## FE

  - `Next.js 15.3.2`

- ## ë°°í¬

  - `AWS EC2`
  - `Docker`
  - `NGINX`

  <br>

---

# ğŸ› ï¸ ê²Œì„ ì‹¤í–‰ ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­

## ê·¸ë˜í”½ ë“œë¼ì´ë²„ì™€ CUDA ì„¤ì¹˜

### 1. NVIDIA ê·¸ë˜í”½ ë“œë¼ì´ë²„ ì„¤ì¹˜

1. [NVIDIA ë“œë¼ì´ë²„ ë‹¤ìš´ë¡œë“œ](https://www.nvidia.co.kr/Download/index.aspx?lang=kr) í˜ì´ì§€ë¡œ ì´ë™
2. ìì‹ ì˜ **ê·¸ë˜í”½ ì¹´ë“œ**ì— ë§ëŠ” ë“œë¼ì´ë²„ ê²€ìƒ‰
3. ë“œë¼ì´ë²„ ë‹¤ìš´ë¡œë“œ í›„ ì„¤ì¹˜

### 2. CUDA ì„¤ì¹˜

1. í„°ë¯¸ë„(cmd ë˜ëŠ” PowerShell)ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ ì‹¤í–‰:

   ```bash
   nvidia-smi
   ```

2. ì¶œë ¥ë˜ëŠ” ì •ë³´ì—ì„œ **CUDA ë²„ì „** í™•ì¸

3. ê¶Œì¥ CUDA ë²„ì „: **11.8**

> âš ï¸ CUDA ë²„ì „ì€ ì‚¬ìš©í•˜ëŠ” GPU ë° ë“œë¼ì´ë²„ì— ë”°ë¼ ë‹¤ë¥´ë¯€ë¡œ, `nvidia-smi` ê²°ê³¼ì— ë§ì¶° ì„¤ì¹˜

  <br>

---

## ğŸ¦™ Ollama ì„¤ì¹˜ ë° ëª¨ë¸ ë‹¤ìš´ë¡œë“œ

### 1. Ollama ì„¤ì¹˜

- ê³µì‹ ì‚¬ì´íŠ¸: [https://ollama.com/download](https://ollama.com/download)
- ìì‹ ì˜ OSì— ë§ëŠ” ì„¤ì¹˜ íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜

### 2. ëª¨ë¸ ì‹¤í–‰ ë° ë‹¤ìš´ë¡œë“œ

1. í„°ë¯¸ë„(cmd)ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ ì…ë ¥:

   ```bash
   ollama run gemma3
   ```

2. `gemma3` ëª¨ë¸ì´ ë‹¤ìš´ë¡œë“œë˜ë©°, ì™„ë£Œ í›„ `/bye` ì…ë ¥ ì°½ì´ ëœ¨ë©´ ì •ìƒ ì„¤ì¹˜ ì™„ë£Œ

  <br>

## ğŸ”— ê¸°íƒ€ ì°¸ê³  ì‚¬í•­

- `gensim`ì€ `word2vec-google-news-300` ëª¨ë¸ê³¼ í•¨ê»˜ ì‚¬ìš©ë˜ë¯€ë¡œ, ì²˜ìŒ ì‹¤í–‰ ì‹œ ëª¨ë¸ì„ ë‹¤ìš´ë¡œë“œ ë°›ëŠ” ë° ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- `fastapi`ëŠ” ì„œë²„ API êµ¬ì„±ì— ì‚¬ìš©ë˜ë©°, ë³„ë„ë¡œ `uvicorn` ë“±ì˜ ì‹¤í–‰ ë„êµ¬ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---
# âš”ï¸ ê²Œì„ ì‹¤í–‰
- í•´ë‹¹ í”„ë¡œê·¸ë¨ì„ ì›í• í•˜ê²Œ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” íŒŒì´ì¬ ì„œë²„ì™€ ì˜¬ë¼ë§ˆ, ìœ ë‹ˆí‹°ë¥¼ ëª¨ë‘ ì‹¤í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

- íŒ¨í‚¤ì§€ í´ë”ì—ì„œ NewEden.zip íŒŒì¼ì˜ ì••ì¶•ì„ í•´ì œí•©ë‹ˆë‹¤.

- íŒ¨í‚¤ì§€ ë‚´ë¶€ì˜ 'RunNewEden.bat' íŒŒì¼ì„ ì‹¤í–‰í•˜ë©´ íŒŒì´ì¬ ì„œë²„(ê°€ìƒí™˜ê²½ ì„¸íŒ… ë° ì˜ì¡´ì„±  ìë™ ì„¤ì¹˜)ì™€ ì˜¬ë¼ë§ˆ, ìœ ë‹ˆí‹°ë¥¼ ëª¨ë‘ ì‹¤í–‰í•˜ë©° ëª¨ë¸ ë‹¤ìš´ë¡œë“œë„ ìë™ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.

- ì²˜ìŒ ì‹¤í–‰ì‹œ ëª¨ë¸ì„ ë‹¤ìš´ë¡œë“œ ë°›ê³  ëª¨ë¸ì„ ë¡œë”©í•˜ëŠ”ë° ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

- ìœ„ ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ì„œë²„ì™€ ê²Œì„ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.
  <br>

---

# ğŸ› ï¸ í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬

ê²Œì„ì— ëŒ€í•œ ì„¤ëª… ì œê³µê³¼ ë‹¤ìš´ë¡œë“œë¥¼ ì§€ì›í•˜ê¸° ìœ„í•´ì„œ í”„ë¡ íŠ¸ì—”ë“œë¡œë§Œ êµ¬ì„±ëœ ì‚¬ì´íŠ¸ë¥¼ ë§Œë“¤ì–´ ë°°í¬í•˜ì˜€ìŠµë‹ˆë‹¤.

í”„ë¡œì íŠ¸ì˜ ë ˆí¬ì§€í† ë¦¬ë¥¼ í†µí•´ CI/CD íŒŒì´í”„ë¼ì¸ì€ êµ¬ì¶•í•˜ì§€ ì•Šì•˜ì§€ë§Œ, AWS EC2 ì„œë²„ì—ëŠ” í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œì íŠ¸ë§Œ ë°°í¬í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1. íŒ€ì˜ GitLab ë ˆí¬ì§€í† ë¦¬ì— í¬í•¨ë˜ì–´ CI/CD íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•˜ê²Œ ë˜ë©´ ì‚¬ì¸¡ì—ì„œ ì œê³µí•œ ê²Œì„ ê´€ë ¨ ì—ì…‹ë„ EC2 ì„œë²„ì— ì˜¬ë¼ê°€ê²Œ ë˜ë¯€ë¡œ ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆìŒ.
2. í”„ë¡ íŠ¸ì—”ë“œ í˜ì´ì§€ êµ¬í˜„ì€ íŒ€ ë‹¨ìœ„ë¡œ ì‘ì—…í•˜ì§€ ì•Šì•˜ìŒ

ë‹¨, í–¥í›„ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•ì„ ìœ„í•œ ì„¤ì •ì€ ì™„ë£Œí–ˆìœ¼ë¯€ë¡œ ê·¸ì— ëŒ€í•œ ì„¤ëª…ì€ ì¶”ê°€í•˜ì˜€ìŠµë‹ˆë‹¤.

<br>

## 1) MobaXterm í•œê¸€ ì¸ì½”ë”© ì„¤ì •

Font charsetì„ DEFAULTë¡œ, Term Charsetì„ EUC-KRë¡œ ë³€ê²½

í•œê¸€ íŒŒì¼ëª…ì´ ì¶œë ¥ë˜ì§€ ì•Šê³  ë¬¸ìê°€ ê¹¨ì§€ëŠ” ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ Character setì„ ë³€ê²½í•´ì•¼ í•œë‹¤.

<br>

## 2) SSH ì ‘ì†

1. MobaXtermì˜ Sessionì—ì„œ SSHë¥¼ ì„ íƒí•œë‹¤.
2. Remote host: (Remote host)
3. Specify username: ì²´í¬
4. Specify username: Ubuntu
5. Advanced SSH Settingsë¥¼ ì„ íƒí•˜ì—¬ ì¶”ê°€ ì„¸íŒ… ì§„í–‰

   - Use private key ì²´í¬
   - ë””ë ‰í† ë¦¬ì—ì„œ pemí‚¤ë¥¼ ì°¾ì•„ ë“±ë¡

<br>

## 3) ì‹œìŠ¤í…œì˜ íƒ€ì„ì¡´ì„ asia/seoulë¡œ ë³€ê²½í•˜ê¸°

1. `sudo dpkg-reconfigure tzdata`ì„ ì…ë ¥í•˜ì—¬ íƒ€ì„ì¡´ ë³€ê²½ì°½ ì—´ê¸°

2. None of the above, Asia, seoulì„ ìˆœì°¨ì ìœ¼ë¡œ ì„ íƒ

3. ì„¤ì • ì™„ë£Œ í›„, ì„¤ì •í•œ ì§€ì—­ìœ¼ë¡œ ì‹œê°„ì´ ë°”ë€Œì—ˆìŒì„ í™•ì¸

<br>

## 4) EC2 ì´ˆê¸° ì„¸íŒ…

1. ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸

   - `sudo apt-get update`

   - `sudo apt-get -y upgrade`

2. ê¸°ë³¸ ë„êµ¬ ì„¤ì¹˜

   - `sudo apt install -y git curl wget vim htop net-tools unzip zip software-properties-common`

3. Java(OpenJDK 17) ì„¤ì¹˜

   - `sudo apt update`

   - `sudo apt install -y openjdk-17-jdk`

4. Java ë²„ì „ í™•ì¸
   - `java -version`

<br>

## 5) Docker ì„¤ì¹˜

1. ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸

   - `sudo apt-get update`

2. HTTPS ê´€ë ¨ íŒ¨í‚¤ì§€ ì„¤ì¹˜

   - `sudo apt-get install -y apt-transport-https ca-certificates curl software-properties-common`

3. ì„¤ì¹˜ê°€ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆëŠ”ì§€ í™•ì¸

   - ` apt policy apt-transport-https`

4. Docker ê³µì‹ GPG í‚¤ ì¶”ê°€

   - `curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -`

5. Docker ì €ì¥ì†Œ ì¶”ê°€

   - `sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"`

6. íŒ¨í‚¤ì§€ ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸

   - `sudo apt-get update`

7. Docker ì„¤ì¹˜

   - `sudo apt install -y docker-ce`

8. ë„ì»¤ ë²„ì „ í™•ì¸

   - `docker â€”version`

9. í˜„ì¬ ì‚¬ìš©ìë¥¼ docker ê·¸ë£¹ì— ì¶”ê°€

   - `sudo usermod -aG docker $USER`

10. Docker ì„œë¹„ìŠ¤ ì‹œì‘

    - `sudo systemctl start docker`

11. ì„œë²„ê°€ ì¬ë¶€íŒ…ëœ í›„ì—ë„ Docker ì„œë¹„ìŠ¤ê°€ ìë™ìœ¼ë¡œ ì‹œì‘ë˜ë„ë¡ ì„¤ì •

    - `sudo systemctl enable docker`

12. ë³€ê²½ ì‚¬í•­ ì ìš©

    - `newgrp docker`

13. ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ì—¬ Dockerê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ì§€ í™•ì¸

    - `docker run hello-world`

<br>

## 6) Docker Compose ì„¤ì¹˜ì™€ Docker ê¸°ë³¸ ì„¤ì •

Docker ComposeëŠ” ì£¼ë¡œ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆë¥¼ ë™ì‹œì— ê´€ë¦¬í•˜ëŠ” ë° ìœ ìš©í•˜ì§€ë§Œ, í”„ë¡ íŠ¸ì—”ë“œë§Œ ë°°í¬í•˜ë”ë¼ë„ ë‹¤ìŒê³¼ ê°™ì€ ì´ìœ ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

    - í™˜ê²½ ì¼ê´€ì„± ìœ ì§€

    - ê°„í¸í•œ ê´€ë¦¬

    - í™•ì¥ì„± ê³ ë ¤

1. Docker Compose ì„¤ì¹˜

   - `sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose`

2. ì‹¤í–‰ ê¶Œí•œì„ ë¶€ì—¬

   - `sudo chmod +x /usr/local/bin/docker-compose`

3. ì„¤ì¹˜ í™•ì¸
   - `docker-compose --version`
4. Docker ë°ëª¬ ì„¤ì • íŒŒì¼(ì˜ˆ: daemon.json)ì„ ì €ì¥í•  ê¸°ë³¸ ìœ„ì¹˜ë¥¼ ë§ˆë ¨í•˜ê¸° ìœ„í•´ /etc/docker ë””ë ‰í† ë¦¬ê°€ ì—†ì„ ê²½ìš° ìƒì„±
   - `sudo mkdir -p /etc/docker`
5. daemon.json íŒŒì¼ ìƒì„±
   - `sudo nano /etc/docker/daemon.json`
6. íŒŒì¼ì— ë‚´ìš© ë„£ê¸°

   ```
   {
   â€œlog-driverâ€: â€œjson-fileâ€,
   â€œlog-optsâ€: {
   â€œmax-sizeâ€: â€œ10mâ€,
   â€œmax-fileâ€: â€œ3â€
   },
   "iptables": false,
   "live-restore": true,
   "userland-proxy": false
   }

   ```

7. Docker ì„œë¹„ìŠ¤ë¥¼ ì¬ì‹œì‘
   - `sudo systemctl restart docker`
8. í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆì™€ ì‚¬ìš© ì¤‘ì¸ í¬íŠ¸ í™•ì¸
   - `docker ps -a`
9. Docker ë„¤íŠ¸ì›Œí¬ í™•ì¸
   - `docker network ls`

<br>

## 7) ufw ë°©í™”ë²½ ì„¤ì •

1. ê¸°ë³¸ì ì¸ ë³´ì•ˆì‚¬í•­ì„ í™•ì¸í•˜ê¸° ìœ„í•´, SSH ë°ëª¬ ì„¤ì • íŒŒì¼ì„ í™•ì¸

   - `sudo nano /etc/ssh/sshd_config`

2. SSH ì„œë¹„ìŠ¤ë¥¼ ì¬ì‹œì‘

   - `sudo systemctl restart sshd`

3. ë°©í™”ë²½ ìƒíƒœë¥¼ í™•ì¸

   - `sudo ufw status`

4. ufw ë°©í™”ë²½ì˜ ê¸°ë³¸ ì •ì±… í™•ì¸

   - `sudo ufw status verdose`

5. HTTPSì„ ìœ„í•œ í¬íŠ¸ ì—´ê¸°

   - `sudo ufw allow 433`

6. FastAPIë¥¼ ìœ„í•œ í¬íŠ¸ ì—´ê¸°
   - `sudo ufw allow 3000`
7. ì„¤ì •ëœ ê·œì¹™ í™•ì¸
   - `sudo ufw status numbered`

<br>

## 8) Fail2ban ì„¤ì¹˜

Fail2banì€ ë¡œê·¸ íŒŒì¼ì„ ëª¨ë‹ˆí„°ë§í•˜ì—¬ ë°˜ë³µì ì¸ ì‹¤íŒ¨ ë¡œê·¸ì¸ ì‹œë„ë¥¼ íƒì§€í•˜ê³ , í•´ë‹¹ IPë¥¼ ì¼ì • ì‹œê°„ ë™ì•ˆ ì°¨ë‹¨(ban)í•˜ëŠ” ë³´ì•ˆ ë„êµ¬ì´ë‹¤.

1. Fail2ban ì„¤ì¹˜
   - `sudo apt-get install â€“y fail2ban`
2. Fail2ban ì„¤ì • íŒŒì¼ ìƒì„±
   - `sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local`
3. í¸ì§‘ê¸°ë¡œ Fail2ban ì„¤ì • íŒŒì¼ ì—´ê¸°
   - `sudo nano /etc/fail2ban/jail.local`
4. SSH ì„¹ì…˜ì„ í¸ì§‘

   - ìˆ˜ì • ì „

     ```
     [sshd]

     # To use more aggressive sshd modes set filter parameter "mode" in jail.local:
     # normal (default), ddos, extra or aggressive (combines all).
     # See "tests/files/logs/sshd" or "filter.d/sshd.conf" for usage example and details.
     #mode   = normal
     port    = ssh
     logpath = %(sshd_log)s
     backend = %(sshd_backend)s

     ```

   - ìˆ˜ì • í›„

     ```
     [sshd]


     # To use more aggressive sshd modes set filter parameter "mode" in jail.local:

     # normal (default), ddos, extra or aggressive (combines all).

     # See "tests/files/logs/sshd" or "filter.d/sshd.conf" for usage example and details.

     #mode = normal
     port = ssh
     logpath = %(sshd_log)s
     backend = %(sshd_backend)s
     enabled = true
     filter = sshd
     maxretry = 3
     bantime = 3600

     ```

5. ì„œë²„ê°€ ì¬ë¶€íŒ…ëœ í›„ì—ë„ Fail2ban ì„œë¹„ìŠ¤ê°€ ìë™ìœ¼ë¡œ ì‹œì‘ë˜ë„ë¡ ì„¤ì •
   - `sudo systemctl enable fail2ban`
6. Fail2ban ì„œë¹„ìŠ¤ ì¬ì‹œì‘
   - `sudo systemctl restart fail2ban`

<br>

## 9) ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì„¤ì •

1. ë°°í¬ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë„£ì„ scripts í´ë” ìƒì„±
   - `mkdir â€“p ~/scripts`
2. deploy.sh ìƒì„±

   - `nano ~/scripts/deploy.sh`

3. ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
   - `chmod + x ~/scripts/deploy.sh`

<br>

## 10) ì›¹ ì„œë²„ ì„¤ì • (Nginx)

1. NginX ì„¤ì¹˜
   - `sudo apt-get install â€“y nginx`
2. NginX ë²„ì „ í™•ì¸

   - `nginx -v`

3. NginX ê¸°ë³¸ ì„¤ì • íŒŒì¼ ìƒì„±

   - `sudo cp /etc/nginx/sites-available/default /etc/nginx/sites-available/default.bak`

4. íŒŒì¼ ì—´ê¸° ë° ë‚´ìš© ì €ì¥

   - `sudo nano /etc/nginx/sites-available/default.bak `

     ```
     # /etc/nginx/sites-available/default

     # ì¼ë°˜ ì‚¬ì´íŠ¸ ì„¤ì • (HTTP)
     server {
         listen 80;
         server_name _;  # ëª¨ë“  í˜¸ìŠ¤íŠ¸ëª…ì— ë§¤ì¹˜ (ë„ë©”ì¸ì´ ì—†ì„ ê²½ìš°)

         # ë³´ì•ˆ í—¤ë” ì„¤ì •
         add_header X-Frame-Options "SAMEORIGIN";
         add_header X-Content-Type-Options "nosniff";
         add_header X-XSS-Protection "1; mode=block";
         add_header Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.youtube.com https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; img-src 'self' data: https:; font-src 'self' https://fonts.gstatic.com; connect-src 'self'; media-src 'self'; frame-src https://www.youtube.com;";
         add_header Referrer-Policy "strict-origin-when-cross-origin";

         # í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ë¡œ í”„ë¡ì‹œ
         location / {
             proxy_pass http://localhost:3000;
             proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
             proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header X-Forwarded-Proto $scheme;

             # WebSocket ì§€ì› (ê°œë°œ ì‹œ í•„ìš”)
             proxy_http_version 1.1;
             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";

             # íƒ€ì„ì•„ì›ƒ ì„¤ì •
             proxy_connect_timeout 60s;
             proxy_send_timeout 60s;
             proxy_read_timeout 60s;
         }

         # ì •ì  íŒŒì¼ ìºì‹± ì„¤ì •
         location /_next/static/ {
             proxy_pass http://localhost:3000/_next/static/;
             proxy_cache_bypass $http_pragma;
             expires 365d;
             add_header Cache-Control "public, max-age=31536000, immutable";
         }

         # ì´ë¯¸ì§€ íŒŒì¼ ìºì‹± ì„¤ì •
         location /images/ {
             proxy_pass http://localhost:3000/images/;
             proxy_cache_bypass $http_pragma;
             expires 7d;
             add_header Cache-Control "public, max-age=604800";
         }

         # íŒŒë¹„ì½˜ ìºì‹± ì„¤ì •
         location = /favicon.ico {
             proxy_pass http://localhost:3000/favicon.ico;
             access_log off;
             log_not_found off;
             expires 365d;
             add_header Cache-Control "public, max-age=31536000";
         }

         # gzip ì••ì¶• ì„¤ì •
         gzip on;
         gzip_comp_level 6;
         gzip_min_length 256;
         gzip_proxied any;
         gzip_types
             application/javascript
             application/json
             application/x-javascript
             text/css
             text/javascript
             text/plain;
     }
     ```

5. NginX ì„¤ì • ë¬¸ë²• í…ŒìŠ¤íŠ¸
   - `sudo nginx -t`
6. NginX ì¬ì‹œì‘
   - `sudo systemctl restart nginx`
7. NginX ìƒíƒœ í™•ì¸
   - `sudo systemctl status nginx`

<br>

## 11) DuckDNSë¥¼ ì´ìš©í•œ ë„ë©”ì¸ ìƒì„±

    DuckDNSì—ì„œ ì„œë¸Œ ë„ë©”ì¸ ìƒì„±í•˜ê³ , DuckDNSì—ì„œ ì œê³µí•˜ëŠ” ê°€ì´ë“œë¥¼ í†µí•´ ì§„í–‰í•œë‹¤.

1. ì„œë²„ì— duckdns ë””ë ‰í† ë¦¬ ìƒì„±

   - `mkdir duckdns`

2. ë””ë ‰í† ë¦¬ë¡œ ì´ë™

   - `cd duckdns`

3. ë©”ì¸ ì—…ë°ì´íŠ¸ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ìƒì„±

   - `vi duck.sh`

4. Duck.sh íŒŒì¼ì— ì‹¤í–‰ ê¶Œí•œì„ ë¶€ì—¬

   - `chmod 700 duck.sh`

5. duck_daemon.sh íŒŒì¼ ìƒì„±

   - `vi duck_daemon.sh`

6. ë°ëª¬ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬

   - `chmod +x duck_daemon.sh`

7. ì†Œìœ ìë¥¼ rootë¡œ ë³€ê²½

   - `sudo chown root duck_daemon.sh`

8. ê¶Œí•œì„ 744ë¡œ ì„¤ì •

   - `sudo chmod 774 duck_daemon.sh`

9. Root ê¶Œí•œìœ¼ë¡œ ë°ëª¬ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰

   - `sudo ./duckdns.sh`

10. ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ í™•ì¸

    - `ps â€“ef | grep duck`

11. ë°ëª¬ ìŠ¤í¬ë¦½íŠ¸ê°€ ë¶€íŒ… ì‹œ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ ì‹¬ë³¼ë¦­ ë§í¬ë¥¼ ìƒì„±

    - ` sudo ln -s ~/duckdns/duck_daemon.sh /etc/rc2.d/S10duckdns`

12. ì‹¬ë³¼ë¦­ ë§í¬ê°€ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸

    - ` ls -la /etc/rc2.d/`

13. í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ duck ê´€ë ¨ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œ

    - `pkill duck`

14. ë¶€íŒ… ì‹œ ì‹¤í–‰ë  ë•Œì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰
    - `sudo /etc/rc2.d/S10duckdns`
15. í”„ë¡œì„¸ìŠ¤ë¥¼ í™•ì¸
    - `ps â€“ef | grep duck`

<br>

## 12) Nginx ì„œë²„ ì´ë¦„ ì—…ë°ì´íŠ¸

Nginxê°€ ì˜¬ë°”ë¥¸ ë„ë©”ì¸ ì´ë¦„ì„ ì¸ì‹í•˜ê³ , í•´ë‹¹ ë„ë©”ì¸ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ì ì ˆí•˜ê²Œ ì²˜ë¦¬í•˜ë„ë¡ í•˜ê¸° ìœ„í•´ì„œ ì§„í–‰í•œë‹¤.

1. /etc/nginx/sites-available/default ì—´ê¸°

   - `sudo nano /etc/nginx/sites-available/default`
   - `server_name _`ì„ `server_name <ë„ë©”ì¸ ì´ë¦„>.duckdns.org;`ìœ¼ë¡œ ë³€ê²½

2. Nginx ì„¤ì • íŒŒì¼ì˜ ë¬¸ë²•ê³¼ êµ¬ì„±ì´ ì˜¬ë°”ë¥¸ì§€ í…ŒìŠ¤íŠ¸
   - `sudo nginx -t`
3. Nginx ì„œë¹„ìŠ¤ë¥¼ ì¬ì‹œì‘í•˜ì—¬ ë³€ê²½ëœ ì„¤ì • ì ìš©
   - `sudo systemctl restart nginx`

<br>

## 13) SSL ì¸ì¦ì„œ ì„¤ì •

Certbotì€ Let's Encryptì—ì„œ ë¬´ë£Œ SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ê³  ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ë„êµ¬ì´ë‹¤.

1. Certbot ì„¤ì¹˜
   - `sudo apt-get install -y certbot python3-certbot-nginx`
2. SSL ì¸ì¦ì„œ ë°œê¸‰

   - `sudo certbot --nginx -d robobo.duckdns.org`

3. ìë™ ê°±ì‹  í…ŒìŠ¤íŠ¸

   - `sudo certbot renew --dry-run`

4. ê¸°ì¡´ ì¸ì¦ì„œ ì„¤ì • í™•ì¸

   - `sudo cat /etc/letsencrypt/renewal/p.ssafy.io.conf`

5. ì‹¤í–‰ ì¤‘ì¸ ì›¹ ì„œë²„ í”„ë¡œì„¸ìŠ¤ í™•ì¸

   - `sudo ps aux | grep -E 'nginx|apache|httpdâ€™`

6. Nginxë¡œ ì¸ì¦ì„œ ì¬ë°œê¸‰

   - `sudo certbot --nginx -d p.ssafy.io`

7. ìë™ ê°±ì‹  í…ŒìŠ¤íŠ¸

   - `sudo certbot renew --dry-run`

8. `/etc/nginx/sites-available/default` ìˆ˜ì •
   - Certbotì„ ì‹¤í–‰í•˜ì—¬ SSL ì¸ì¦ì„œë¥¼ ì„¤ì¹˜í•  ë•Œ, Certbotì€ NGINX êµ¬ì„± íŒŒì¼ì„ ìë™ìœ¼ë¡œ ìˆ˜ì •í•˜ë¯€ë¡œ ì§ì ‘ í•´ë‹¹ íŒŒì¼ì„ ìˆ˜ì •í•  í•„ìš”ëŠ” ì—†ë‹¤.

<br>

## 14) ìë™ ë³´ì•ˆ ì—…ë°ì´íŠ¸ ì„¤ì •

1.  ìë™ ë³´ì•ˆ ì—…ë°ì´íŠ¸ ì„¤ì •
    - `sudo apt-get install -y unattended-upgrades apt-listchanges`
2.  ì„¤ì • íŒŒì¼ í¸ì§‘

    - `sudo nano /etc/apt/apt.conf.d/50unattended-upgrades`

      ```
      Unattended-Upgrade::Allowed-Origins { "${distro_id}:${distro_codename}"; "${distro_id}:${distro_codename}-security"; };
      Unattended-Upgrade::Package-Blacklist { };
      Unattended-Upgrade::AutoFixInterruptedDpkg "true"; Unattended-Upgrade::MinimalSteps "true"; Unattended-Upgrade::InstallOnShutdown "false"; Unattended-Upgrade::Mail "root"; Unattended-Upgrade::MailOnlyOnError "true"; Unattended-Upgrade::Remove-Unused-Dependencies "true"; Unattended-Upgrade::Automatic-Reboot "false";

      ```

      ìœ„ì™€ ê°™ì´ ì£¼ì„ì„ í•´ì œí•˜ì—¬ ì„¤ì •ì„ ì™„ë£Œí•œë‹¤.

3.  APT íŒ¨í‚¤ì§€ ê´€ë¦¬ìê°€ ìë™ ì—…ë°ì´íŠ¸ ì‘ì—…ì„ ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰í•˜ë„ë¡ êµ¬ì„±í•˜ëŠ” ì„¤ì • íŒŒì¼ ìˆ˜ì •
    - `sudo nano /etc/apt/apt.conf.d/20auto-upgrades`

<br>

## 15) Docker ì´ë¯¸ì§€ ë³´ì•ˆ ìŠ¤ìº” ì„¤ì •

1. Trivy ì„¤ì¹˜

   - `curl -sfL https://raw.githubusercontent.com/aquasecurity/trivy/main/contrib/install.sh | sudo sh -s -- -b /usr/local/bin v0.60.0`

2. ìŠ¤ìº” ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ìƒì„±

   - `nano ~/scripts/scan_docker_images.sh`
   - íŒŒì¼ ì‘ì„±

     ```
     #!/bin/bash
     # ì´ë¯¸ì§€ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
     IMAGES=$(docker images --format "{{.Repository}}:{{.Tag}}" | grep -v "<none>")

     echo "=== Docker Security Scan $(date) ===" > ~/logs/docker_scan.log

     # Trivy ì¡´ì¬ í™•ì¸
     if command -v trivy &> /dev/null; then
         echo "Using Trivy for vulnerability scanning." >> ~/logs/docker_scan.log
         # Trivy ë°ì´í„°ë² ì´ìŠ¤ ì—…ë°ì´íŠ¸
         trivy --quiet image --download-db-only >> ~/logs/docker_scan.log 2>&1
     fi

     # ê° ì´ë¯¸ì§€ ê²€ì‚¬
     for IMG in $IMAGES; do
         echo "Scanning $IMG..." >> ~/logs/docker_scan.log
         # ê¸°ë³¸ ì´ë¯¸ì§€ ì •ë³´ ê¸°ë¡
         docker image inspect $IMG --format '{{.RepoDigests}}' >> ~/logs/docker_scan.log
         # Trivyê°€ ìˆëŠ” ê²½ìš° ì·¨ì•½ì  ìŠ¤ìº” ì‹¤í–‰
         if command -v trivy &> /dev/null; then
             trivy image --severity HIGH,CRITICAL $IMG >> ~/logs/docker_scan.log 2>&1
         fi
     done

     # ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ ì •ë¦¬
     echo "Cleaning up unused images..." >> ~/logs/docker_scan.log
     docker image prune -f >> ~/logs/docker_scan.log

     ```

3. ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬

   - `chmod +x ~/scripts/scan_docker_images.sh`

4. ë¡œê·¸ ë””ë ‰í† ë¦¬ ìƒì„±

   - `mkdir -p ~/logs`

5. cron ì‘ì—… ë“±ë¡

   - `(crontab -l 2>/dev/null; echo "0 3 * * 1 ~/scripts/scan_docker_images.sh") | crontab -`

<br>

## 16) ì‹œìŠ¤í…œ ë¡œê·¸ ëª¨ë‹ˆí„°ë§ ì„¤ì •

1. ë¡œê·¸ ëª¨ë‹ˆí„°ë§ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±

   - `nano ~/scripts/check_logs.sh`
   - íŒŒì¼ ì‘ì„±

     ```
     #!/bin/bash
     LOG_DIR=~/logs
     mkdir -p $LOG_DIR

     # ì‹œìŠ¤í…œ ë¡œê·¸ ìš”ì•½
     echo "=== System Logs Summary $(date) ===" > $LOG_DIR/daily_summary.log
     grep -i error /var/log/syslog | tail -n 50 >> $LOG_DIR/daily_summary.log

     # Docker ì»¨í…Œì´ë„ˆ ë¡œê·¸ ìš”ì•½
     echo -e "\n=== Docker Container Logs ===" >> $LOG_DIR/daily_summary.log
     docker ps -a >> $LOG_DIR/daily_summary.log
     docker stats --no-stream >> $LOG_DIR/daily_summary.log

     # ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰
     echo -e "\n=== Disk Usage ===" >> $LOG_DIR/daily_summary.log
     df -h >> $LOG_DIR/daily_summary.log

     # ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
     echo -e "\n=== Memory Usage ===" >> $LOG_DIR/daily_summary.log
     free -h >> $LOG_DIR/daily_summary.log
     ```

2. ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬

   - `chmod +x ~/scripts/check_logs.sh`

3. cron ì‘ì—… ë“±ë¡
   - `(crontab -l 2>/dev/null; echo "0 0 * * * ~/scripts/check_logs.sh") | crontab -`

<br>

## 17) Docker ë¦¬ì†ŒìŠ¤ ì •ë¦¬ ìë™í™”

1. Docker ì •ë¦¬ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ìƒì„±

   - `nano ~/scripts/docker_cleanup.sh`

   - íŒŒì¼ ì‘ì„±

     ```
     #!/bin/bash
     echo "=== Docker Cleanup Started $(date) ===" >> ~/logs/docker_cleanup.log

     # ì¤‘ì§€ëœ ì»¨í…Œì´ë„ˆ ì œê±°
     echo "Removing stopped containers..." >> ~/logs/docker_cleanup.log
     docker container prune -f >> ~/logs/docker_cleanup.log

     # ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ ì •ë¦¬
     echo "Removing unused images..." >> ~/logs/docker_cleanup.log
     docker image prune -f >> ~/logs/docker_cleanup.log

     # ë³¼ë¥¨ ì •ë¦¬
     echo "Removing unused volumes..." >> ~/logs/docker_cleanup.log
     docker volume prune -f >> ~/logs/docker_cleanup.log

     # ë„¤íŠ¸ì›Œí¬ ì •ë¦¬
     echo "Removing unused networks..." >> ~/logs/docker_cleanup.log
     docker network prune -f >> ~/logs/docker_cleanup.log

     echo "=== Docker Cleanup Completed $(date) ===" >> ~/logs/docker_cleanup.log

     ```

2. ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬

   - `chmod +x ~/scripts/docker_cleanup.sh`

3. cron ì‘ì—… ë“±ë¡

   - `(crontab -l 2>/dev/null; echo "0 4 * * 0 ~/scripts/docker_cleanup.sh") | crontab -h`

<br>

## 18) í”„ë¡œì íŠ¸ ìˆ˜ë™ ë°°í¬

1. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ìƒì„±
   - `mkdir â€“p ~/project`
2. Projectë¡œ ì´ë™

   - `cd ~/project`

3. í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œì íŠ¸ í´ë”ë¥¼ /home/ubuntu/project/ ë””ë ‰í† ë¦¬ë¡œ ë“œë˜ê·¸ ì•¤ ë“œë¡­

4. ì´ë¯¸ì§€ ì¬ë¹Œë“œ ë° ì»¨í…Œì´ë„ˆ ì‹œì‘
   - `sudo docker-compose up -d â€“build`
5. ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸

   - `sudo docker-compose ps`

<br>

## 19) í”„ë¡œì íŠ¸ í´ë” ì œê±° (í•„ìš” ì‹œ)

1. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
   - `cd /home/ubuntu/project/<í”„ë¡œì íŠ¸ í´ë”>
`
2. ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ì¤‘ì§€

   - `sudo docker-compose down`

3. ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ í™•ì¸

   - `sudo docker ps`

4. ê¸°ì¡´ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ì‚­ì œ
   - `sudo rm -rf /home/ubuntu/project/<í”„ë¡œì íŠ¸ í´ë”>`

## 20) Jenkinsë¡œ CI/CD ì„¤ì •

1. Jenkins í‚¤ ë‹¤ìš´ë¡œë“œ ë° ì €ì¥

   - `sudo wget -O /usr/share/keyrings/jenkins-keyring.asc \
https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key`

2. Jenkins ì €ì¥ì†Œ ì¶”ê°€

   - `echo "deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] \
https://pkg.jenkins.io/debian-stable binary/" | sudo tee \
/etc/apt/sources.list.d/jenkins.list > /dev/null`

3. íŒ¨í‚¤ì§€ ëª©ë¡ ì—…ë°ì´íŠ¸

   - `sudo apt-get update`

4. APTë¥¼ í†µí•´ Jenkins ì„¤ì¹˜

   - `sudo apt-get install jenkins`

5. Jenkins ì„œë¹„ìŠ¤ ìë™ ì‹œì‘ ì„¤ì •

   - `sudo systemctl enable jenkins`

6. Jenkins ì„œë¹„ìŠ¤ ì‹œì‘

   - `sudo systemctl start jenkins`

7. Jenkins ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸

   - `sudo systemctl status jenkins`

8. Jenkins ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ í™•ì¸

   - `sudo cat /var/lib/jenkins/secrets/initialAdminPassword`

9. Jenkins ë°©í™”ë²½ í•´ì œ

   - `sudo ufw allow 8080`

10. ì„¤ì •ëœ ê·œì¹™ í™•ì¸

    - `sudo ufw status numbered`

11. Jenkins ì„œë²„(<ì£¼ì†Œ>:8080/)ì— ì ‘ì†í•´ì„œ ì´ˆê¸° ì„¤ì •

12. í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜ ì§„í–‰(ì„¤ì¹˜ê°€ ì•ˆë˜ëŠ” ê²ƒì€ ì¬ì‹œë„í•˜ì—¬ ì„¤ì¹˜í•œë‹¤.)

13. Jenkins ë¡œê·¸ì¸

14. Jenkins ìê²© ì¦ëª… ì„¤ì •

    A. Credential ì„¤ì •

    B. Private Keyì— pem í‚¤ ì¶”ê°€

    C. GitLab ì ‘ì†ìš© ìê²© ì¦ëª… ì¶”ê°€

15. GitLab Connection ì„¤ì •

16. Jenkins íŒŒì´í”„ë¼ì¸ ìƒì„±ê³¼ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€
